(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{14:function(t,e,a){},15:function(t,e,a){},16:function(t,e,a){"use strict";a.r(e);var i=a(0),n=a.n(i),r=a(8),s=a.n(r),h=(a(14),a(2)),u=a(3),c=a(5),l=a(4),o=a(1),f=a(6);a(15);var d=function(t){return{length:t,health:[],sunk:"N",hit:function(t){this.health[t]="x",this.isSunk()},isSunk:function(){var t=/\d.\d/g,e=this.health.some((function(e){return t.test(e)}));this.sunk=e?"N":"Y"}}};function m(t){var e=t,a=new Array(8);return{board:function(){for(var t=0;t<a.length;t++){for(var e=[],i=0;i<a.length;i++)e.push(i);a[t]=e}return a}(),fleet:[d(5),d(4),d(3),d(3),d(2)],player:e,fleetStatus:"Y",hits:0,setShip:function(t,e){return this.board[t][e]="s"},setHit:function(t,e){return this.board[t][e]="h"},shipLengthHack:function(){this.fleet.forEach((function(t){t.health.length=t.length}))},checkShip:function(t,e){for(var a=e.health,i=0;i<a.length;i++)a[i]===t&&(e.hit(i),this.shipLengthHack());this.hasFleet()},setHitToShip:function(t,e){for(var a="".concat(t,",").concat(e),i=0;i<this.fleet.length;i++)this.checkShip(a,this.fleet[i])},setMiss:function(t,e){return this.board[t][e]="m"},test:function(t,e,a){return this.board[t][e]=a},recievedAttack:function(t,e){var a=this.board[t][e];"s"===a?(this.setHit(t,e),this.setHitToShip(t,e)):"number"===typeof a&&(a=this.setMiss(t,e))},legalShipPlacement:function(t,e,a,i){var n=i.length;if("up"===a){for(var r=!0,s=t;s>t-n;s--){if(s<0)return r=!1;if("s"===this.board[s][e])return r=!1}return r}if("down"===a){for(var h=!0,u=t;u<t+n;u++){if(u>7)return h=!1;if("s"===this.board[u][e])return h=!1}return h}if("left"===a){for(var c=!0,l=e;l>e-n;l--){if(l<0)return c=!1;if("s"===this.board[t][l])return c=!1}return c}if("right"===a){for(var o=!0,f=e;f<e+n;f++){if(f>7)return o=!1;if("s"===this.board[t][f])return o=!1}return o}},placeShip:function(t,e,a,i){if(!1!==this.legalShipPlacement(t,e,a,i))if("left"===a)for(var n=e-i.length,r=e;r>n;r--)this.setShip(t,r),i.health.push("".concat(t,",").concat(r));else if("right"===a)for(var s=e+i.length,h=e;h<s;h++)this.setShip(t,h),i.health.push("".concat(t,",").concat(h));else if("up"===a)for(var u=t-i.length,c=t;c>u;c--)this.setShip(c,e),i.health.push("".concat(c,",").concat(e));else if("down"===a)for(var l=t+i.length,o=t;o<l;o++)this.setShip(o,e),i.health.push("".concat(o,",").concat(e))},hasFleet:function(){for(var t=[],e=0;e<this.fleet.length;e++)t.push(this.fleet[e].sunk);t.includes("N")?this.fleetStatus="Y":this.fleetStatus="N"}}}var v=function(){return{human:m(),ai:m(),currentPlayer:"human",random:function(){return Math.round(10*Math.random())},aiAttack:function(){var t=this.random();return t<8&&t>-1?t:this.aiAttack()},humanPlay:function(t,e){this.ai.recievedAttack(t,e);var a=this.aiAttack(),i=this.aiAttack();this.aiPlay(a,i)},aiPlay:function(t,e){var a=this.human.board[t][e];"h"===a?this.aiPlay(this.aiAttack(),this.aiAttack()):"m"===a?this.aiPlay(this.aiAttack(),this.aiAttack()):this.human.recievedAttack(t,e),this.currentPlayer="human"}}},g=(v(),v());var p=function(t){function e(t){var a;return Object(h.a)(this,e),(a=Object(c.a)(this,Object(l.a)(e).call(this,t))).state={gameData:g,endGame:"no way hosea"},a.handleButtonClick=a.handleButtonClick.bind(Object(o.a)(a)),a}return Object(f.a)(e,t),Object(u.a)(e,[{key:"handleButtonClick",value:function(){window.location.reload()}},{key:"checkEndGame",value:function(){"N"===this.state.gameData.human.fleetStatus&&this.setState({endGame:"AI Wins!"}),"N"===this.state.gameData.ai.fleetStatus&&this.setState({endGame:"You Win!"})}},{key:"checkAiPlay",value:function(){for(var t=this.state.gameData.human.board,e=document.querySelectorAll(".human .board .square"),a=0;a<e.length;a++){var i=1*e[a].innerHTML[0],n=1*e[a].innerHTML[2],r=t[i][n];"m"===r?e[a].classList.add("miss"):"h"===r&&e[a].classList.add("hit"),this.checkEndGame()}}},{key:"humanPlayed",value:function(){this.state.gameData.aiPlay(this.state.gameData.aiAttack(),this.state.gameData.aiAttack()),this.checkEndGame(),this.checkAiPlay()}},{key:"render",value:function(){var t=this;return n.a.createElement("div",null,n.a.createElement("div",{className:"boards"},n.a.createElement("div",{className:"gameStatus"},n.a.createElement("h1",null," ",this.state.endGame," "),n.a.createElement("button",{onClick:function(){return t.handleButtonClick()}}," New Game ")),n.a.createElement("div",{className:"human"},n.a.createElement(k,{player:"human",data:this.state.gameData.human,currentPlayer:this.state.gameData.currentPlayer})),n.a.createElement("div",{className:"ai",onClick:function(){return t.humanPlayed()}},n.a.createElement(k,{player:"ai",data:this.state.gameData.ai,currentPlayer:this.state.gameData.currentPlayer}))))}}]),e}(n.a.Component),k=function(t){function e(t){var a;return Object(h.a)(this,e),(a=Object(c.a)(this,Object(l.a)(e).call(this,t))).state={player:t.player,gameBoard:t.data,gridInterface:[]},a}return Object(f.a)(e,t),Object(u.a)(e,[{key:"random",value:function(){return Math.round(10*Math.random())}},{key:"legalCoord",value:function(){var t=this.random();return t<8&&t>-1?t:this.legalCoord()}},{key:"shipRandomizer",value:function(){return this.legalCoord()}},{key:"directionRandomizer",value:function(){var t=this.legalCoord();return t<=1?"right":t<=3?"left":t<=5?"up":t<=7?"down":"right"}},{key:"initShips",value:function(){for(var t=this.state.gameBoard.fleet,e=0;e<t.length;e++)for(;t[e].health.length<1;)this.state.gameBoard.placeShip(this.shipRandomizer(),this.shipRandomizer(),this.directionRandomizer(),t[e])}},{key:"square",value:function(t,e,a){var i=this;return n.a.createElement("div",{className:"square",value:a,onClick:function(t){return i.squareClicked(t)},key:[t,e],data:[t,e]},t," ",e)}},{key:"shipSquare",value:function(t,e,a){var i=this;return n.a.createElement("div",{className:"square ship",value:a,onClick:function(t){return i.squareClicked(t)},key:[t,e],data:[t,e]},t," ",e)}},{key:"aiShipSquare",value:function(t,e,a){var i=this;return n.a.createElement("div",{className:"aiship",value:a,onClick:function(t){return i.squareClicked(t)},key:[t,e],data:[t,e]},t," ",e)}},{key:"buildSquares",value:function(t){for(var e=[],a=this.state.gameBoard.board,i=0;i<a.length;i++)for(var n=0;n<a[i].length;n++)"s"===a[i][n]&&"human"===this.state.player?(e.push(this.shipSquare(i,n,a[i][n])),this.state.gridInterface.push(this.shipSquare(i,n,a[i][n]))):"s"===a[i][n]&&"ai"===this.state.player?(e.push(this.aiShipSquare(i,n,a[i][n])),this.state.gridInterface.push(this.aiShipSquare(i,n,a[i][n]))):(e.push(this.square(i,n,a[i][n])),this.state.gridInterface.push(this.square(i,n,a[i][n])));return e}},{key:"squareClicked",value:function(t){var e=1*t.target.attributes.data.value[0],a=1*t.target.attributes.data.value[2];if("human"!==t.target.parentNode.parentNode.className)if("ship"===t.target.className)this.state.gameBoard.recievedAttack(e,a),t.target.className="hit";else if("aiship"===t.target.className)this.state.gameBoard.recievedAttack(e,a),t.target.className="hit";else if("square"===t.target.className)this.state.gameBoard.recievedAttack(e,a),t.target.className="miss";else{if("hit"===t.target.className)return;if("miss"===t.target.className)return}}},{key:"render",value:function(){return n.a.createElement("div",{className:"board"},this.initShips(),this.buildSquares(8))}}]),e}(n.a.Component),y=function(){return n.a.createElement("div",{className:"App"},n.a.createElement(p,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},9:function(t,e,a){t.exports=a(16)}},[[9,1,2]]]);
//# sourceMappingURL=main.f9a18db6.chunk.js.map